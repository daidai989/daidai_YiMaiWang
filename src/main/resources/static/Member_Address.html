<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <link href="css/style.css" rel="stylesheet" type="text/css"/>
    <!--[if IE 6]>
    <script src="js/iepng.js" type="text/javascript"></script>
    <script type="text/javascript">
        EvPNG.fix('div, ul, img, li, input, a');
    </script>
    <![endif]-->
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/menu.js" type="text/javascript"></script>

    <script src="js/select.js" type="text/javascript"></script>
    <script src="js/vue.js" type="text/javascript"></script>
    <script src="js/axios.js" type="text/javascript"></script>
    <link href="css/element.css" rel="stylesheet" type="text/css"/>
    <script src="js/element.js" type="text/javascript"></script>
    <script src="js/element-china-area-data.iife.js" type="text/javascript"></script>
    <title>尤洪</title>
</head>
<body>
<div id="root6">
    <!--Begin Header Begin-->
    <div class="soubg">
        <div class="sou">
            <!--Begin 所在收货地区 Begin-->
            <span class="s_city_b">
        	<span class="fl">送货至：</span>
            <span class="s_city">
            	<span>四川</span>
                <div class="s_city_bg">
                	<div class="s_city_t"></div>
                    <div class="s_city_c">
                    	<h2>请选择所在的收货地区</h2>
                        <table border="0" cellpadding="0" cellspacing="0" class="c_tab"
                               style="width:235px; margin-top:10px;">
                          <tr>
                            <th>A</th>
                            <td class="c_h"><span>安徽</span><span>澳门</span></td>
                          </tr>
                          <tr>
                            <th>B</th>
                            <td class="c_h"><span>北京</span></td>
                          </tr>
                          <tr>
                            <th>C</th>
                            <td class="c_h"><span>重庆</span></td>
                          </tr>
                          <tr>
                            <th>F</th>
                            <td class="c_h"><span>福建</span></td>
                          </tr>
                          <tr>
                            <th>G</th>
                            <td class="c_h"><span>广东</span><span>广西</span><span>贵州</span><span>甘肃</span></td>
                          </tr>
                          <tr>
                            <th>H</th>
                            <td class="c_h"><span>河北</span><span>河南</span><span>黑龙江</span><span>海南</span><span>湖北</span><span>湖南</span></td>
                          </tr>
                          <tr>
                            <th>J</th>
                            <td class="c_h"><span>江苏</span><span>吉林</span><span>江西</span></td>
                          </tr>
                          <tr>
                            <th>L</th>
                            <td class="c_h"><span>辽宁</span></td>
                          </tr>
                          <tr>
                            <th>N</th>
                            <td class="c_h"><span>内蒙古</span><span>宁夏</span></td>
                          </tr>
                          <tr>
                            <th>Q</th>
                            <td class="c_h"><span>青海</span></td>
                          </tr>
                          <tr>
                            <th>S</th>
                            <td class="c_h"><span>上海</span><span>山东</span><span>山西</span><span
                                    class="c_check">四川</span><span>陕西</span></td>
                          </tr>
                          <tr>
                            <th>T</th>
                            <td class="c_h"><span>台湾</span><span>天津</span></td>
                          </tr>
                          <tr>
                            <th>X</th>
                            <td class="c_h"><span>西藏</span><span>香港</span><span>新疆</span></td>
                          </tr>
                          <tr>
                            <th>Y</th>
                            <td class="c_h"><span>云南</span></td>
                          </tr>
                          <tr>
                            <th>Z</th>
                            <td class="c_h"><span>浙江</span></td>
                          </tr>
                        </table>
                    </div>
                </div>
            </span>
        </span>
            <!--End 所在收货地区 End-->
            <span class="fr">
        	<span class="fl">你好，请<a href="Login.html">登录</a>&nbsp; <a href="Regist.html" style="color:#ff4e00;">免费注册</a>&nbsp;|&nbsp;<a
                    href="#">我的订单</a>&nbsp;|</span>
        	<span class="ss">
            	<div class="ss_list">
                	<a href="#">收藏夹</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">我的收藏夹</a></li>
                                <li><a href="#">我的收藏夹</a></li>
                            </ul>
                        </div>
                    </div>     
                </div>
                <div class="ss_list">
                	<a href="#">客户服务</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">客户服务</a></li>
                                <li><a href="#">客户服务</a></li>
                                <li><a href="#">客户服务</a></li>
                            </ul>
                        </div>
                    </div>    
                </div>
                <div class="ss_list">
                	<a href="#">网站导航</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">网站导航</a></li>
                                <li><a href="#">网站导航</a></li>
                            </ul>
                        </div>
                    </div>    
                </div>
            </span>
            <span class="fl">|&nbsp;关注我们：</span>
            <span class="s_sh"><a class="sh1" href="#">新浪</a><a class="sh2" href="#">微信</a></span>
            <span class="fr">|&nbsp;<a href="#">手机版&nbsp;<img align="absmiddle" src="images/s_tel.png"/></a></span>
        </span>
        </div>
    </div>
    <div class="m_top_bg">
        <div class="top">
            <div class="m_logo"><a href="Index.html"><img src="images/logo1.png"/></a></div>
            <div class="m_search">
                <form>
                    <input class="m_ipt" type="text" value=""/>
                    <input class="m_btn" type="submit" value="搜索"/>
                </form>
                <span class="fl"><a href="#">咖啡</a><a href="#">iphone 6S</a><a href="#">新鲜美食</a><a
                        href="#">蛋糕</a><a href="#">日用品</a><a href="#">连衣裙</a></span>
            </div>
            <div class="i_car">
                <div class="car_t">购物车 [ <span>3</span> ]</div>
                <div class="car_bg">
                    <!--Begin 购物车未登录 Begin-->
                    <div class="un_login">还未登录！<a href="Login.html" style="color:#ff4e00;">马上登录</a> 查看购物车！
                    </div>
                    <!--End 购物车未登录 End-->
                    <!--Begin 购物车已登录 Begin-->
                    <ul class="cars">
                        <li>
                            <div class="img"><a href="#"><img height="58" src="images/car1.jpg" width="58"/></a></div>
                            <div class="name"><a href="#">法颂浪漫梦境50ML 香水女士持久清新淡香 送2ML小样3只</a></div>
                            <div class="price"><font color="#ff4e00">￥399</font> X1</div>
                        </li>
                        <li>
                            <div class="img"><a href="#"><img height="58" src="images/car2.jpg" width="58"/></a></div>
                            <div class="name"><a href="#">香奈儿（Chanel）邂逅活力淡香水50ml</a></div>
                            <div class="price"><font color="#ff4e00">￥399</font> X1</div>
                        </li>
                        <li>
                            <div class="img"><a href="#"><img height="58" src="images/car2.jpg" width="58"/></a></div>
                            <div class="name"><a href="#">香奈儿（Chanel）邂逅活力淡香水50ml</a></div>
                            <div class="price"><font color="#ff4e00">￥399</font> X1</div>
                        </li>
                    </ul>
                    <div class="price_sum">共计&nbsp; <font color="#ff4e00">￥</font><span>1058</span></div>
                    <div class="price_a"><a href="#">去购物车结算</a></div>
                    <!--End 购物车已登录 End-->
                </div>
            </div>
        </div>
    </div>
    <!--End Header End-->
    <div class="i_bg bg_color">
        <!--Begin 用户中心 Begin -->
        <div class="m_content">
            <div class="m_left">
                <div class="left_n">管理中心</div>
                <div class="left_m">
                    <div class="left_m_t t_bg1">订单中心</div>
                    <ul>
                        <li><a href="Member_Order.html">我的订单</a></li>
                        <li><a class="now" href="Member_Address.html">收货地址</a></li>
                        <li><a href="#">缺货登记</a></li>
                        <li><a href="#">跟踪订单</a></li>
                    </ul>
                </div>
                <div class="left_m">
                    <div class="left_m_t t_bg2">会员中心</div>
                    <ul>
                        <li><a href="Member_User.html">用户信息</a></li>
                        <li><a href="Member_Collect.html">我的收藏</a></li>
                        <li><a href="Member_Msg.html">我的留言</a></li>
                        <li><a href="Member_Links.html">推广链接</a></li>
                        <li><a href="#">我的评论</a></li>
                    </ul>
                </div>
                <div class="left_m">
                    <div class="left_m_t t_bg3">账户中心</div>
                    <ul>
                        <li><a href="Member_Safe.html">账户安全</a></li>
                        <li><a href="Member_Packet.html">我的红包</a></li>
                        <li><a href="Member_Money.html">资金管理</a></li>
                    </ul>
                </div>
                <div class="left_m">
                    <div class="left_m_t t_bg4">分销中心</div>
                    <ul>
                        <li><a href="Member_Member.html">我的会员</a></li>
                        <li><a href="Member_Results.html">我的业绩</a></li>
                        <li><a href="Member_Commission.html">我的佣金</a></li>
                        <li><a href="Member_Cash.html">申请提现</a></li>
                    </ul>
                </div>
            </div>
            <div class="m_right">
                <p></p>
                <div class="mem_tit">收货地址</div>
                <div class="address">
                    <el-table
                            :data="page.list"
                            stripe
                            style="width: 100%">
                        <el-table-column
                                label="日期"
                                prop="createTime" width:="180">
                        </el-table-column>
                        <el-table-column
                                label="收件人"
                                prop="recipient" width="120">
                        </el-table-column>
                        <el-table-column
                                label="地址"
                                prop="address">
                        </el-table-column>
                        <el-table-column
                                label="电话"
                                prop="phone">
                        </el-table-column>
                        <el-table-column
                                label="备注"
                                prop="remark">
                        </el-table-column>
                        <el-table-column
                                fixed="right"
                                label="操作">
                            <template slot-scope="scope">
                                <el-button @click="update(scope.row)" size="small" type="primary">修改</el-button>
                                <el-button @click="isDelete(scope.row)" size="small" type="danger">删除</el-button>
                                <p align="right" v-if="scope.row.isDefault != 1">
                                    <a @click="setDefault(scope.row)" style="color:#ff4e00;">设为默认</a>
                                </p>
                                <p align="right" v-if="scope.row.isDefault == 1">
                                    <a style="color:#ff4e00;">默认地址</a>
                                </p>
                            </template>
                        </el-table-column>
                    </el-table>
                    <el-pagination
                            :current-page="page.pageNum"
                            :page-size="page.pageSize"
                            :total="page.total"
                            @current-change="handleCurrentChange"
                            layout="total, pager, next, jumper">
                    </el-pagination>
                </div>

                <div class="mem_tit">
                    <a href="#"><img src="images/add_ad.gif"/></a>
                </div>
                <el-form :model="address" :rules="rules" class="demo-ruleForm" label-width="100px" ref="ruleForm"
                         style="text-align: center;">
                    <el-form-item label="地址" prop="addressList" style="width: 500px;">
                        <el-cascader :options="pcTextArr"
                                     size="large"
                                     style="float: left;"
                                     v-model="address.addressList">
                        </el-cascader>
                    </el-form-item>
                    <el-form-item label="详细地址" prop="detailAddress" style="width: 500px;">
                        <el-input v-model="address.detailAddress"></el-input>
                    </el-form-item>
                    <el-form-item label="收件人" prop="recipient" style="width: 500px;">
                        <el-input v-model="address.recipient"></el-input>
                    </el-form-item>
                    <el-form-item label="电话" prop="phone" style="width: 500px;">
                        <el-input v-model="address.phone"></el-input>
                    </el-form-item>
                    <el-form-item label="备注" prop="remark" style="width: 500px;">
                        <el-input v-model="address.remark"></el-input>
                    </el-form-item>
                    <el-form-item label="设为默认地址" style="width: 500px;">
                        <el-switch style="float: left; " v-model="address.isSure"></el-switch>
                    </el-form-item>
                    <el-form-item>
                        <el-button @click="submitForm('ruleForm')" type="primary">提交</el-button>
                        <el-button @click="resetForm('ruleForm')">重置</el-button>
                    </el-form-item>
                </el-form>

            </div>
        </div>
        <!--End 用户中心 End-->
        <!--Begin Footer Begin -->
        <div class="b_btm_bg b_btm_c">
            <div class="b_btm">
                <table border="0" cellpadding="0"
                       cellspacing="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;">
                    <tr>
                        <td width="72"><img height="62" src="images/b1.png" width="62"/></td>
                        <td><h2>正品保障</h2>正品行货 放心购买</td>
                    </tr>
                </table>
                <table border="0" cellpadding="0"
                       cellspacing="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;">
                    <tr>
                        <td width="72"><img height="62" src="images/b2.png" width="62"/></td>
                        <td><h2>满38包邮</h2>满38包邮 免运费</td>
                    </tr>
                </table>
                <table border="0" cellpadding="0"
                       cellspacing="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;">
                    <tr>
                        <td width="72"><img height="62" src="images/b3.png" width="62"/></td>
                        <td><h2>天天低价</h2>天天低价 畅选无忧</td>
                    </tr>
                </table>
                <table border="0" cellpadding="0"
                       cellspacing="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;">
                    <tr>
                        <td width="72"><img height="62" src="images/b4.png" width="62"/></td>
                        <td><h2>准时送达</h2>收货时间由你做主</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="b_nav">

            <dl>
                <dt><a href="#">新手上路</a></dt>
                <dd><a href="#">售后流程</a></dd>
                <dd><a href="#">购物流程</a></dd>
                <dd><a href="#">订购方式</a></dd>
                <dd><a href="#">隐私声明</a></dd>
                <dd><a href="#">推荐分享说明</a></dd>
            </dl>
            <dl>
                <dt><a href="#">配送与支付</a></dt>
                <dd><a href="#">货到付款区域</a></dd>
                <dd><a href="#">配送支付查询</a></dd>
                <dd><a href="#">支付方式说明</a></dd>
            </dl>
            <dl>
                <dt><a href="#">会员中心</a></dt>
                <dd><a href="#">资金管理</a></dd>
                <dd><a href="#">我的收藏</a></dd>
                <dd><a href="#">我的订单</a></dd>
            </dl>
            <dl>
                <dt><a href="#">服务保证</a></dt>
                <dd><a href="#">退换货原则</a></dd>
                <dd><a href="#">售后服务保证</a></dd>
                <dd><a href="#">产品质量保证</a></dd>
            </dl>
            <dl>
                <dt><a href="#">联系我们</a></dt>
                <dd><a href="#">网站故障报告</a></dd>
                <dd><a href="#">购物咨询</a></dd>
                <dd><a href="#">投诉与建议</a></dd>
            </dl>
            <div class="b_tel_bg">
                <a class="b_sh1" href="#">新浪微博</a>
                <a class="b_sh2" href="#">腾讯微博</a>
                <p>
                    服务热线：<br/>
                    <span>400-123-4567</span>
                </p>
            </div>
            <div class="b_er">
                <div class="b_er_c"><img height="118" src="images/er.gif" width="118"/></div>
                <img src="images/ss.png"/>
            </div>
        </div>
        <div class="btmbg">
            <div class="btm">
                备案/许可证编号：蜀ICP备12009302号-1-www.dingguagua.com Copyright © 2015-2018 尤洪商城网 All Rights
                Reserved. 复制必究 , Technical Support: Dgg Group <br/>
                <img height="33" src="images/b_1.gif" width="98"/><img height="33" src="images/b_2.gif" width="98"/><img
                    height="33" src="images/b_3.gif" width="98"/><img height="33" src="images/b_4.gif" width="98"/><img
                    height="33" src="images/b_5.gif" width="98"/><img height="33" src="images/b_6.gif" width="98"/>
            </div>
        </div>
        <!--End Footer End -->
    </div>
</div>
</body>


<!--[if IE 6]>
<![endif]-->
</html>
<script src="js/request.js" type="text/javascript"></script>
<script>
    new Vue({
        el: "#root6",
        data() {
            const checkPhone = (rule, value, callback) => {
                var phone = /^1\d{10}$/
                if (!phone.test(value)) {
                    callback(new Error("请输入一个11位的1开头的数字"))
                } else {
                    callback()
                }
            }
            return {
                address: {
                    addressList: '',
                    detailAddress: '',
                    recipient: '',
                    phone: '',
                    remark: '',
                    isSure: false,
                },
                totalAddess: '',
                updateId: 0,
                pcTextArr: elementChinaAreaData.pcaTextArr,
                page: [],
                rules: {
                    addressList: [
                        {required: true, message: '请选择地址', trigger: 'change'}
                    ],
                    detailAddress: [
                        {required: true, message: '请输入详细地址', trigger: 'blur'},
                        {min: 2, max: 10, message: '长度在 3 到 10 个字符', trigger: 'blur'}
                    ],
                    recipient: [
                        {required: true, message: '请输入收件名', trigger: 'blur'},
                        {min: 2, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur'}
                    ],
                    phone: [
                        {required: true, message: '请输入电话号码', trigger: 'blur'},
                        {validator: checkPhone, trigger: 'blur'}
                    ],
                    remark: [
                        {min: 1, max: 20, message: '长度在 1 到 20 个字符', trigger: 'blur'}
                    ],

                }
            }
        },
        mounted() {
            this.checkRoled()
            this.getAddressList(1, 5)
        },
        methods: {
            checkRoled() {
                let token=localStorage.getItem("token");
                axios.get('http://localhost:8080/checkRoled', {params: {token: token}})
                    .then((resp) => {

                    });
            },
            getAddressList(currentPageNo, pageSize) {
                axios.get('getAddressById', {
                    params: {
                        userId: 18,
                        currentPageNo: currentPageNo,
                        pageSize: pageSize
                    }
                }).then((result) => {
                    console.log(result.data)
                    this.page = result.data
                });
            },
            handleCurrentChange(pageNum) {
                this.page.pageNum = pageNum
                this.getAddressList(pageNum, this.page.pageSize)
            },
            setDefault(row) {
                axios.get('setDefault', {
                    params: {
                        id: row.id,
                        userId: row.userId
                    }
                }).then((result) => {
                    console.log(result.data);
                    this.getAddressList(this.page.pageNum, this.page.pageSize)
                });
            },
            submitForm(formName) {
                this.$refs[formName].validate((valid) => {
                    this.totalAddess = this.address.addressList.join('/') + '/' + this.address.detailAddress;
                    console.log(this.address.address)
                    if (valid) {
                        axios.get('addAddress', {
                            params: {
                                address: this.totalAddess,
                                userId: 18,
                                remark: this.address.remark,
                                recipient: this.address.recipient,
                                phone: this.address.phone,
                                isSure: this.address.isSure ? 1 : 0
                            }
                        }).then((result) => {
                            console.log(result.data);
                            this.getAddressList(1, 5);
                            this.resetForm(formName);
                            alert("添加成功!")
                        });
                    } else {
                        console.log('error submit!!');
                        return false;
                    }
                });
            },
            resetForm(formName) {
                this.$refs[formName].resetFields();
                this.address.addressList = '';
                this.address.isSure = false;
            },

            update(row) {
                window.location.href = "Member_Address_Update.html?id=" + row.id
            },


        },
    })
</script>
