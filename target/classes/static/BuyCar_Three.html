<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <link href="css/style.css" rel="stylesheet" type="text/css"/>
    <!--[if IE 6]>
    <script src="js/iepng.js" type="text/javascript"></script>
    <script type="text/javascript">
        EvPNG.fix('div, ul, img, li, input, a');
    </script>
    <![endif]-->
    <script src="js/jquery-1.8.2.min.js"
            type="text/javascript"></script>
    <script src="js/menu.js" type="text/javascript"></script>

    <script src="js/n_nav.js" type="text/javascript"></script>

    <script src="js/num.js" type="text/javascript">
        var jq = jQuery.noConflict();
    </script>

    <script src="js/shade.js" type="text/javascript"></script>
    <script src="js/vue.js"></script>
    <script src="js/axios.js"></script>
    <script src="js/element.js"></script>
    <title>尤洪</title>
</head>
<body>
<!--Begin Header Begin-->
<div id="app11">
<div class="soubg">
    <div class="sou">
        <!--Begin 所在收货地区 Begin-->
        <span class="s_city_b">
        	<span class="fl">送货至：</span>
            <span class="s_city">
            	<span>四川</span>
                <div class="s_city_bg">
                	<div class="s_city_t"></div>
                    <div class="s_city_c">
                    	<h2>请选择所在的收货地区</h2>
                        <table border="0" cellpadding="0" cellspacing="0" class="c_tab"
                               style="width:235px; margin-top:10px;">
                          <tr>
                            <th>A</th>
                            <td class="c_h"><span>安徽</span><span>澳门</span></td>
                          </tr>
                          <tr>
                            <th>B</th>
                            <td class="c_h"><span>北京</span></td>
                          </tr>
                          <tr>
                            <th>C</th>
                            <td class="c_h"><span>重庆</span></td>
                          </tr>
                          <tr>
                            <th>F</th>
                            <td class="c_h"><span>福建</span></td>
                          </tr>
                          <tr>
                            <th>G</th>
                            <td class="c_h"><span>广东</span><span>广西</span><span>贵州</span><span>甘肃</span></td>
                          </tr>
                          <tr>
                            <th>H</th>
                            <td class="c_h"><span>河北</span><span>河南</span><span>黑龙江</span><span>海南</span><span>湖北</span><span>湖南</span></td>
                          </tr>
                          <tr>
                            <th>J</th>
                            <td class="c_h"><span>江苏</span><span>吉林</span><span>江西</span></td>
                          </tr>
                          <tr>
                            <th>L</th>
                            <td class="c_h"><span>辽宁</span></td>
                          </tr>
                          <tr>
                            <th>N</th>
                            <td class="c_h"><span>内蒙古</span><span>宁夏</span></td>
                          </tr>
                          <tr>
                            <th>Q</th>
                            <td class="c_h"><span>青海</span></td>
                          </tr>
                          <tr>
                            <th>S</th>
                            <td class="c_h"><span>上海</span><span>山东</span><span>山西</span><span
                                    class="c_check">四川</span><span>陕西</span></td>
                          </tr>
                          <tr>
                            <th>T</th>
                            <td class="c_h"><span>台湾</span><span>天津</span></td>
                          </tr>
                          <tr>
                            <th>X</th>
                            <td class="c_h"><span>西藏</span><span>香港</span><span>新疆</span></td>
                          </tr>
                          <tr>
                            <th>Y</th>
                            <td class="c_h"><span>云南</span></td>
                          </tr>
                          <tr>
                            <th>Z</th>
                            <td class="c_h"><span>浙江</span></td>
                          </tr>
                        </table>
                    </div>
                </div>
            </span>
        </span>
        <!--End 所在收货地区 End-->
        <span class="fr">
        	 <span class="fl">你好，{{$data.user.username ?  $data.user.username : '请登录'}}&nbsp;<a v-if="!$data.user.username" href="Login.html">登录</a>&nbsp;&nbsp;<a v-if="$data.user.username" href="javascript:void(0)" @click="logout()">注销</a>&nbsp;&nbsp; <a href="Regist.html" style="color:#ff4e00;">免费注册</a>&nbsp;|&nbsp;<a
                     href="#">我的订单</a>&nbsp;|</span>
        	<span class="ss">
            	<div class="ss_list">
                	<a href="#">收藏夹</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">我的收藏夹</a></li>
                                <li><a href="#">我的收藏夹</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ss_list">
                	<a href="#">客户服务</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">客户服务</a></li>
                                <li><a href="#">客户服务</a></li>
                                <li><a href="#">客户服务</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ss_list">
                	<a href="#">网站导航</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">网站导航</a></li>
                                <li><a href="#">网站导航</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </span>
            <span class="fl">|&nbsp;关注我们：</span>
            <span class="s_sh"><a class="sh1" href="#">新浪</a><a class="sh2" href="#">微信</a></span>
            <span class="fr">|&nbsp;<a href="#">手机版&nbsp;<img
                    align="absmiddle"
                    src="images/s_tel.png"/></a></span>
        </span>
    </div>
</div>
<div class="top">
    <div class="logo"><a href="Index.html"><img
            src="images/logo.png"/></a></div>
    <div class="search">
        <form>
            <input class="s_ipt" type="text" value=""/>
            <input class="s_btn" type="submit" value="搜索"/>
        </form>
        <span class="fl"><a href="#">咖啡</a><a href="#">iphone 6S</a><a href="#">新鲜美食</a><a href="#">蛋糕</a><a
                href="#">日用品</a><a href="#">连衣裙</a></span>
    </div>

</div>
<!--End Header End-->
<!--Begin Menu Begin-->
<div class="menu_bg">
    <div class="menu">
        <!--Begin 商品分类详情 Begin-->
        <div class="nav">
            <div class="nav_t">全部商品分类</div>
            <div class="leftNav none">
                <ul>
                    <li v-for="(item, index) in theFirst" :key="index"
                        @mouseenter="loadSecondAndThird(item.id)">
                        <div class="fj">
                            <span class="n_img"><span></span><img src="images/nav1.png" /></span>
                            <span class="fl">{{item.name}}</span>
                        </div>
                        <div class="zj">
                            <div class="zj_l">
                                <div class="zj_l_c" v-for="(subItem, index) in theSecond" :key="index">
                                    <h2>{{subItem.name}}</h2>
                                    <a v-for="(subItem, index) in theThird" :key="index">{{subItem.name}}|</a>
                                </div>
                            </div>
                        </div>
                    </li>

                </ul>
            </div>
        </div>
        <!--End 商品分类详情 End-->
        <ul class="menu_r">
            <li><a href="Index.html">首页</a></li>
            <li><a href="Food.html">美食</a></li>
            <li><a href="Fresh.html">生鲜</a></li>
            <li><a href="HomeDecoration.html">家居</a></li>
            <li><a href="SuitDress.html">女装</a></li>
            <li><a href="MakeUp.html">美妆</a></li>
            <li><a href="Digital.html">数码</a></li>
            <li><a href="GroupBuying.html">团购</a></li>
        </ul>
        <div class="m_ad">中秋送好礼！</div>
    </div>
</div>
<!--End Menu End-->
<div class="i_bg">
    <div class="content mar_20">
        <img src="images/img3.jpg"/>
    </div>

    <!--Begin 第三步：提交订单 Begin -->
    <div class="content mar_20">


        <!--Begin 支付宝支付 Begin -->
        <div class="warning">
            <table border="0" cellpadding="0" cellspacing="0" style="width:1000px; text-align:center;">
                <tr height="35">
                    <td style="font-size:18px;">
                        感谢您在本店购物！您的订单已提交成功，请记住您的订单号: <font color="#ff4e00" >{{serialNumber}}</font>
                    </td>
                </tr>
                <tr>
                    <td style="font-size:14px; font-family:'宋体'; padding:10px 0 20px 0; border-bottom:1px solid #b6b6b6;">
                        您选定的配送方式为: <font color="#ff4e00">申通快递</font>； &nbsp; &nbsp;您选定的支付方式为:
                        <font color="#ff4e00">支付宝</font>； &nbsp; &nbsp;您的应付款金额为: <font color="#ff4e00">{{totalPrice}}元</font>
                    </td>
                </tr>
                <tr>
                    <td style="padding:20px 0 30px 0; font-family:'宋体';">
                        支付宝网站(www.alipay.com) 是国内先进的网上支付平台。<br/>
                        支付宝收款接口：在线即可开通，零预付，免年费，单笔阶梯费率，无流量限制。<br/>
                        <a href="#" style="color:#ff4e00;">立即在线申请</a>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="btn_u" style="margin:0 auto; padding:0 20px; width:120px;">
                            <a @click="alipay_use()">立即使用支付宝支付</a></div>
                        <a href="index.html">首页</a> &nbsp; &nbsp; <a @click="alipay_use">用户中心</a>
                    </td>
                </tr>
            </table>
        </div>
        <!--Begin 支付宝支付 Begin -->


    </div>
    <!--End 第三步：提交订单 End-->


    <!--Begin Footer Begin -->
    <div class="b_btm_bg bg_color">
        <div class="b_btm">
            <table border="0" cellpadding="0"
                   cellspacing="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;">
                <tr>
                    <td width="72"><img height="62" src="images/b1.png"
                                        width="62"/></td>
                    <td><h2>正品保障</h2>正品行货 放心购买</td>
                </tr>
            </table>
            <table border="0" cellpadding="0"
                   cellspacing="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;">
                <tr>
                    <td width="72"><img height="62" src="images/b2.png"
                                        width="62"/></td>
                    <td><h2>满38包邮</h2>满38包邮 免运费</td>
                </tr>
            </table>
            <table border="0" cellpadding="0"
                   cellspacing="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;">
                <tr>
                    <td width="72"><img height="62" src="images/b3.png"
                                        width="62"/></td>
                    <td><h2>天天低价</h2>天天低价 畅选无忧</td>
                </tr>
            </table>
            <table border="0" cellpadding="0"
                   cellspacing="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;">
                <tr>
                    <td width="72"><img height="62" src="images/b4.png"
                                        width="62"/></td>
                    <td><h2>准时送达</h2>收货时间由你做主</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="b_nav">
        <dl>
            <dt><a href="#">新手上路</a></dt>
            <dd><a href="#">售后流程</a></dd>
            <dd><a href="#">购物流程</a></dd>
            <dd><a href="#">订购方式</a></dd>
            <dd><a href="#">隐私声明</a></dd>
            <dd><a href="#">推荐分享说明</a></dd>
        </dl>
        <dl>
            <dt><a href="#">配送与支付</a></dt>
            <dd><a href="#">货到付款区域</a></dd>
            <dd><a href="#">配送支付查询</a></dd>
            <dd><a href="#">支付方式说明</a></dd>
        </dl>
        <dl>
            <dt><a href="#">会员中心</a></dt>
            <dd><a href="#">资金管理</a></dd>
            <dd><a href="#">我的收藏</a></dd>
            <dd><a href="#">我的订单</a></dd>
        </dl>
        <dl>
            <dt><a href="#">服务保证</a></dt>
            <dd><a href="#">退换货原则</a></dd>
            <dd><a href="#">售后服务保证</a></dd>
            <dd><a href="#">产品质量保证</a></dd>
        </dl>
        <dl>
            <dt><a href="#">联系我们</a></dt>
            <dd><a href="#">网站故障报告</a></dd>
            <dd><a href="#">购物咨询</a></dd>
            <dd><a href="#">投诉与建议</a></dd>
        </dl>
        <div class="b_tel_bg">
            <a class="b_sh1" href="#">新浪微博</a>
            <a class="b_sh2" href="#">腾讯微博</a>
            <p>
                服务热线：<br/>
                <span>400-123-4567</span>
            </p>
        </div>
        <div class="b_er">
            <div class="b_er_c"><img height="118" src="images/er.gif"
                                     width="118"/></div>
            <img src="images/ss.png"/>
        </div>
    </div>
    <div class="btmbg">
        <div class="btm">
            备案/许可证编号：蜀ICP备12009302号-1-www.dingguagua.com Copyright © 2015-2018 尤洪商城网 All Rights Reserved.
            复制必究 , Technical Support: Dgg Group <br/>
            <img height="33" src="images/b_1.gif" width="98"/><img
                height="33" src="images/b_2.gif" width="98"/><img
                height="33" src="images/b_3.gif" width="98"/><img
                height="33" src="images/b_4.gif" width="98"/><img
                height="33" src="images/b_5.gif" width="98"/><img
                height="33" src="images/b_6.gif" width="98"/>
        </div>
    </div>
    <!--End Footer End -->
</div>
</div>

</body>

<script src="js/request.js" type="text/javascript"></script>

<script type="text/javascript">

    new Vue({
        el: '#app11',
        data: {
            serialNumber: "",
            shopName: "商品购物",
            totalPrice:null,
            user: {
                username: "",
                id: null,
                productId: null,
            },
            products: [],
            theFirst: [],
            theSecond: [],
            theThird: [],

        },
        methods: {
            firstLoad() {
                axios.get('http://localhost:8080/getFirstCategory')
                    .then((resp) => {
                        this.theFirst = resp.data;
                    });
            },
            loadSecondAndThird(id) {
                this.secondLoad(id);
            },
            secondLoad(id) {
                axios.get('http://localhost:8080/getSecondCategory', {
                    params: {
                        id: id
                    }
                })
                    .then((resp) => {
                        this.theSecond = resp.data;
                        if (this.theSecond.length > 0) {
                            this.thirdLoad(this.theSecond[0].id);
                        }
                    });
            },
            thirdLoad(id) {
                axios.get('http://localhost:8080/getThirdCategory', {
                    params: {
                        id: id
                    }
                })
                    .then((resp) => {
                        this.theThird = resp.data;
                    });
            },
            initLogin() {
                let token = localStorage.getItem("token");
                axios.get('http://localhost:8080/getUser', {
                    params: {
                        token: token
                    }
                })
                    .then((resp) => {
                        console.log(resp.data)
                        this.getUser=resp.data
                        this.user.username = resp.data.userName
                        this.user.id = resp.data.id

                    });
            },




            logout() {
                let token=localStorage.getItem("token");
                localStorage.removeItem("token");
                axios.get('http://localhost:8080/logout', {params: {token: token}})
                    .then((resp) => {
                        window.location.href="index.html"
                    });
            },
            async  alipay_use() {
                try {
                    const resp = await axios.get('http://localhost:8080/createOrder', {
                        params: {
                            price: this.totalPrice,
                            shopName: this.shopName,
                            serialNumber: this.serialNumber
                        }
                    });
                    console.log(resp.data);
                    document.write(resp.data);

                    return resp.data; // 返回响应数据
                } catch (error) {
                    console.error(error);
                }
            },
            checkRoled() {
                let token=localStorage.getItem("token");
                axios.get('http://localhost:8080/checkRoled', {params: {token: token}})
                    .then((resp) => {

                    });
            },


        },
        mounted() {
            this.checkRoled()
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            this.serialNumber = urlParams.get('serialNumber');
            this.totalPrice = urlParams.get('totalPrice');
            this.firstLoad();
            this.initLogin()
        }
    })
</script>
</html>
